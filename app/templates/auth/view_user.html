{% extends 'base.html' %}

{% block title %}{{ user.username }}'s Profile - LH3{% endblock %}

{% block content %}
<div class="card">
    <h1>{{ user.username }}'s Profile</h1>

    <div style="display: flex; margin-bottom: 1.5rem;">
        <div style="margin-right: 2rem;">
            {% if user.avatar %}
            <img src="{{ user.avatar }}" alt="{{ user.username }}" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover;">
            {% else %}
            <div style="width: 100px; height: 100px; border-radius: 50%; background-color: var(--secondary-color); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                {{ user.username[0].upper() }}
            </div>
            {% endif %}
        </div>

        <div>
            <p><strong>Username:</strong> {{ user.username }}</p>
            {% if current_user.is_admin() %}
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Role:</strong> {{ user.role }}</p>
            {% endif %}

            {% if user.hash_nickname %}
            <p><strong>Hash Nickname:</strong> {{ user.hash_nickname }}</p>
            {% endif %}

            {% if user.bio %}
            <p><strong>Bio:</strong> {{ user.bio }}</p>
            {% endif %}

            {% if current_user.is_admin() %}
            <div class="admin-controls">
                <p><strong>User ID:</strong> {{ user.id }}</p>
            </div>
            {% endif %}
        </div>
    </div>

    {% if user.favorite_runs and (user.privacy_settings.runs == 'public' or current_user.is_admin() or (current_user.is_authenticated and user.privacy_settings.runs == 'members')) %}
    <div class="section">
        <h2>Favorite Runs/Trails</h2>
        <ul>
            {% for run in user.favorite_runs %}
            <li>{{ run }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if user.personal_stats and (user.privacy_settings.stats == 'public' or current_user.is_admin() or (current_user.is_authenticated and user.privacy_settings.stats == 'members')) %}
    <div class="section">
        <h2>Personal Stats</h2>
        <ul>
            {% for key, value in user.personal_stats.items() %}
            <li><strong>{{ key }}:</strong> {{ value }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if current_user.is_admin() %}
    <div class="admin-controls">
        <h2>Admin Controls</h2>
        <div class="button-group">
            <a href="#" class="button">Edit User</a>
            <a href="#" class="button" style="background-color: #e74c3c;">Delete User</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block styles %}
<style>
    .section {
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid #eee;
    }

    .admin-controls {
        margin-top: 1.5rem;
        padding: 1rem;
        border: 1px solid #ddd;
        border-radius: var(--border-radius);
        background-color: #f9f9f9;
    }

    .button-group {
        display: flex;
        gap: 0.5rem;
    }
</style>
{% endblock %}